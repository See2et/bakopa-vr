# Implementation Plan

- [ ] 1. クライアント基盤と最小ライフサイクルを整える
- [ ] 1.1 起動時の依存初期化と失敗理由の通知を成立させる
  - 起動要求を受けたときに初期化が行われる状態を作る
  - 失敗時に原因が明示できるようにする
  - _Requirements: 1.1, 1.4_

- [ ] 1.2 終了時の停止とリソース解放を成立させる
  - 終了要求に対して安全に停止できる状態を作る
  - _Requirements: 1.3_

- [ ] 1.3 実行中のフレーム更新を継続できるようにする
  - 実行中にフレーム更新が継続される状態を作る
  - _Requirements: 1.2_

- [ ] 2. CoreECS の状態正本と更新サイクルを構築する
- [ ] 2.1 ECS World の初期化と更新サイクルを成立させる
  - 起動時に World が初期化される状態を作る
  - フレーム更新でシステムが実行される状態を作る
  - 更新完了後に次フレームへ遷移できる状態を作る
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 2.2 ゲーム状態の正本が ECS に集中していることを保証する
  - ゲーム状態が ECS 内にのみ保持される状態を作る
  - _Requirements: 5.1_

- [ ] 3. GodotBridge の橋渡しと入力経路を整備する
- [ ] 3.1 GDExtension 経由の橋渡し入口を初期化する
  - Godot から呼び出し可能な入口が初期化される状態を作る
  - 初期化失敗時にエラーを通知できる状態を作る
  - _Requirements: 3.1, 3.3_

- [ ] 3.2 1フレーム1入力で ECS 更新を実行できるようにする
  - Godot からのフレーム入力を受け取れる状態を作る
  - 入力に基づく ECS 更新が実行される状態を作る
  - Godot からの API 呼び出しを受け付ける状態を作る
  - _Requirements: 3.2, 3.4_

- [ ] 3.3 入力の取り込みと直接書換の拒否を成立させる
  - Godot/XR 入力を ECS への入力として扱える状態を作る
  - Godot 側の直接状態変更要求を拒否できる状態を作る
  - _Requirements: 5.2, 5.4_

- [ ] 4. XR 起動と SteamVR 検知を整える
- [ ] 4.1 OpenXR を有効化し SteamVR の起動可否を判定する
  - SteamVR 起動時に起動可能となる状態を作る
  - SteamVR 未起動時に理由を通知できる状態を作る
  - _Requirements: 2.1, 2.2_

- [ ] 5. 描画投影の最小経路を整備する
- [ ] 5.1 ECS 状態を描画へ反映し最小フレームを表示できるようにする
  - 描画に必要な最小フレームを表示できる状態を作る
  - ECS 状態が描画に反映される状態を作る
  - _Requirements: 2.3, 5.3_

- [ ] 6. 統合フローと再現性検証を整える
- [ ] 6.1 起動・更新・描画の一連フローを結線する
  - 起動から描画までが一貫して動作する状態を作る
  - _Requirements: 1.1, 1.2, 2.1, 2.3, 3.2_

- [ ] 6.2 実行・検証の再現性をコードベース内で担保する
  - 実行に必要な前提や操作を出力・確認できる仕組みを用意する
  - 最小統合動作の検証ポイントを実行時に確認できる状態を作る
  - _Requirements: 6.1, 6.2, 6.3_

- [ ] 7. テストによる品質確認を整える
- [ ] 7.1 CoreECS の更新と状態正本の単体検証を行う
  - 更新サイクルと状態正本の保持を検証できる状態を作る
  - _Requirements: 4.1, 4.2, 4.3, 5.1_

- [ ] 7.2 GodotBridge と XR 起動経路の統合検証を行う
  - ブリッジ初期化失敗時の動作を確認できる状態を作る
  - SteamVR 起動可否の判定を確認できる状態を作る
  - _Requirements: 3.1, 3.3, 2.1, 2.2_

- [ ] 7.3 SteamVR 上での最小描画を確認する
  - 実機環境で起動と描画の確認ができる状態を作る
  - _Requirements: 2.1, 2.3, 6.3_
