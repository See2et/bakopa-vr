# Implementation Plan

- [ ] 1. クライアント基盤とライフサイクルの確立
- [ ] 1.1 起動・終了の最小フローを成立させる
  - 起動時に必要な依存を初期化し、失敗理由を明示できるようにする
  - 終了時にリソース解放と停止が完了することを確認する
  - _Requirements: 1.1, 1.3, 1.4_

- [ ] 1.2 実行中のフレーム更新を維持する
  - 実行中に更新が継続されることを確認する
  - _Requirements: 1.2_

- [ ] 2. CoreECS の状態正本と更新基盤を整える
- [ ] 2.1 (P) ECS World の初期化と更新サイクルを構築する
  - 初期化後に更新が行われる
  - 更新完了後に次フレームへ遷移できる
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 2.2 (P) ゲーム状態の正本を ECS に集中させる
  - 状態は ECS 内のみが正本となる
  - _Requirements: 5.1_

- [ ] 3. GodotBridge と入力経路を整備する
- [ ] 3.1 (P) GDExtension 経由の橋渡し入口を確立する
  - 呼び出し経路の初期化が完了する
  - 初期化失敗時にエラーを通知する
  - _Requirements: 3.1, 3.3_

- [ ] 3.2 (P) 1フレーム1入力で ECS 更新を実行する
  - フレーム入力を受け取り更新を実行する
  - Godot からの API 呼び出しを受け付ける
  - _Requirements: 3.2, 3.4_

- [ ] 3.3 (P) 入力の取り込みと直接書換の拒否を整備する
  - Godot/XR 入力を ECS への入力として扱う
  - Godot 側の直接状態変更要求を拒否する
  - _Requirements: 5.2, 5.4_

- [ ] 4. XR 起動と SteamVR 検知を整備する
- [ ] 4.1 (P) OpenXR を有効化し SteamVR の起動可否を判定する
  - SteamVR 起動時に起動可能となる
  - 未起動時に理由を通知する
  - _Requirements: 2.1, 2.2_

- [ ] 5. 描画投影の最小経路を整備する
- [ ] 5.1 (P) ECS 状態を描画に反映し最小フレームを表示する
  - 描画に必要な最小フレームを表示できる
  - ECS 状態が描画に反映される
  - _Requirements: 2.3, 5.3_

- [ ] 6. 統合と実行検証の準備
- [ ] 6.1 全体の起動・更新・描画フローを結線する
  - 起動から描画までの流れが一貫して動作する
  - _Requirements: 1.1, 1.2, 2.1, 2.3, 3.2_

- [ ] 6.2 実行・検証手順を再現可能に整備する
  - 実行に必要な前提と操作手順を整理する
  - 検証時の確認ポイントを明確化する
  - 手順に従って最小統合動作を確認できる
  - _Requirements: 6.1, 6.2, 6.3_

- [ ] 7. テストによる品質確認
- [ ] 7.1 CoreECS の更新と状態正本の単体検証を行う
  - 更新サイクルと状態正本の保持を検証する
  - _Requirements: 4.1, 4.2, 4.3, 5.1_

- [ ] 7.2 GodotBridge と XR 起動経路の統合検証を行う
  - ブリッジ初期化失敗時の動作を確認する
  - SteamVR 起動可否の判定を確認する
  - _Requirements: 3.1, 3.3, 2.1, 2.2_

- [ ] 7.3 SteamVR 上での最小描画を確認する
  - 実機環境で起動と描画の確認を行う
  - _Requirements: 2.1, 2.3, 6.3_
